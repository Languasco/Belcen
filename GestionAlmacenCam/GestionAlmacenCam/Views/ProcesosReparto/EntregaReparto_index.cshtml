


<style>
    .panel-body {
        padding: 5px !important;
    }
    .control-label {
        font-size: 11px !important;
        color: #2b89e0;
        font-family: Tahoma;
    }

    .form-control {
        font-size: 11px;
        height: 30px;
    }

    .contentCombo .select2-container {
        margin-left: 0px;
        margin-top: -10px;
        width: 98% !important;
    }

    .ModalBorderSombra .modal-content {
        box-shadow: inset 0px 0px 7px rgba(0,0,0,.5), 1px 1px 5px #fff;
    }

    .contenedorGrupo legend {
        font-size: 12px !important;
        font-family: GillSans, Calibri, Trebuchet, sans-serif;
        color: #2c5ca9;
        font-weight: 600;
        letter-spacing: 1px;
    }

    .contenedorGrupo fieldset {
        padding-left: 20px;
        padding-right: 20px;
        border: 1px solid #2c4d6d;
        padding-bottom: 10px;
        border-radius: 4px;
    }

    .ContentFilters .select2-container .select2-choice, label {
        font-size: 11px;
    }

    .input-group-btn .btn {
        padding: 8px 12px;
        height: 30px;
    }

    .jq-toast-wrap.top-right {
        top: 20px;
        right: 40px;
        width: 300px;
    }

    .pagination > li > a, .pagination > li > span {
        padding: 1px !important;
        color: #337ab7 !important;
    }
     

    .btn span.glyphicon {
        opacity: 0;
    }

    .btn.active span.glyphicon {
        opacity: 1;
    }

    #s2id_cbo_tipo_Factura {
        width: 25% !important;
        margin-bottom: -7px;
    }

    #map {
        height: 600px;
    }
    /*.table tbody tr.selected td {
        background: aquamarine !important;
    }*/
    

    /*table {
        overflow: hidden;
    }

    tr:hover {
        background-color: #ffa;
    }

    td, th {
        position: relative;
    }

    td:hover::after,
    th:hover::after {
        content: "";
        position: absolute;
        background-color: #ffa;
        left: 0;
        top: -5000px;
        height: 10000px;
        width: 100%;
        z-index: -1;
    }*/

    .checkbox label {
        font-size: 13px !important;
        color: cornflowerblue;
    }

    .card {
        /* Add shadows to create the "card" effect */
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
    }

    /* On mouse-over, add a deeper shadow */
    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
    }

    .jumbotron p {
        margin-bottom: 15px;
        font-size: 12px;
        font-weight: 200;
    }

</style>

 

<div ng-init="initController();initAll(); ">
    <section id="cabeceras" style="margin-bottom: -30px;">
        <div class="panel-body ContentFilters contentCombo">
            <div class="well" style="background-color: #2b4c6c;padding-bottom: 0px; padding-top: 0px;color: #fff;    width: 100%;">
                <div class="row">
                        <div class="col-sm-6 text-center ">
                            <div class="col-sm-4">
                                <b> Local </b>  <span class="help-block"></span>
                                <select class="selectFiltros" id="cbo_local" ng-model="Objeto_ParametroFiltro.id_local" ng-change="change_Local_Almacen(Objeto_ParametroFiltro.id_local);">
                                    <option value="0">[ ----  TODOS  --- ]</option>
                                    <option ng-repeat="item in Lista_Local" value="{{item.id_Local}}">{{item.nombre_Local}}</option>
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <b> Almacen </b> <span class="help-block"></span>
                                <select class="selectFiltros" id="cbo_almacen" ng-model="Objeto_ParametroFiltro.id_almacen">
                                    <option value="0">[ ----  TODOS  --- ]</option>
                                    <option ng-repeat="item in Lista_Almacen" value="{{item.id_Almacen}}">{{item.descripcion_Almacen}}</option>
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <b> Vendedor </b> <span class="help-block"></span>
                                    <select class="selectFiltros" id="cbo_vendedor_filtro" ng-model="Objeto_ParametroFiltro.id_Vendedor">
                                        <option value="0">[ ----  TODOS  --- ]</option>
                                        <option ng-repeat="item in Lista_Vendedor" value="{{item.id_personal}}">{{item.apellidos_personal}}  {{item.nombres_personal}} </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 text-center " style="margin-bottom:0px; ">
                            <div class="col-sm-8 ">
                                <div class="col-sm-6 ">
                                    <b> Transportista </b>   <span class="help-block"></span>
                                    <select class="selectFiltros" id="cbo_transportista" ng-model="Objeto_ParametroFiltro.id_transportista">
                                        <option value="0">[ ----  Seleccione  --- ]</option>
                                        <option ng-repeat="item in Lista_Transportista" value="{{item.id_personal}}">{{item.apellidos_personal}}   {{item.nombres_personal}}</option>
                                    </select>
                                </div>
                                <div class="col-sm-6 "  style="margin-top: 0px;">
                                    <b> Fecha</b>
                                    <input type="text" class="form-control datepicker" ng-model="Objeto_ParametroFiltro.fecha_ini" id="dtp_fechaIni_filtro" placeholder="Fecha - mm/dd/yyyy">
                                </div>
                            </div>
                            <div class="col-sm-4 " style="padding: 20px;">
                                <div class="btn-group">
                                    <button role="button" class="btn btn-primary btn-sm" id="btnBuscar" ng-click="OptimizarRutasPedidos()"><i class="fa fa-line-chart" aria-hidden="true"></i> Ruta de Entrega</button>
                                </div>
                            </div>
                         </div> 

                </div>
            </div>
            <div class="form-inline ">
                <div class="row">
                    <div class="col-sm-12">
                        <div style="text-align:center">
                            <div class="cssload-speeding-wheel" ng-if="loaderfiltros"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div style="padding-left: 45%;" ng-if="showLoaderSave">
        <p class="loader">
        </p>
    </div>
    <section id="ubicacion">
        <div class="panel-body ContentFilters contentCombo">
            <div class="row ContentFilters contentCombo">
                <div class="col-md-8">
                    @*<div class="checkbox-success text-center">
                        <div class="checkbox checkbox-inline">
                            <input type="checkbox" id="chkOptimizar" value="option1" ng-click="changeOpciones()">
                            <label for="chkOptimizar"> Optimizar </label>
                        </div>
                        <div class="checkbox checkbox-success checkbox-inline">
                            <input type="checkbox" id="chkAutopista" value="option1">
                            <label for="chkAutopista"> Evitar Autopista </label>
                        </div>
                        <div class="checkbox checkbox-inline">
                            <input type="checkbox" id="chkPeajes" value="option1">
                            <label for="chkPeajes"> Evita Peajes </label>
                        </div>
                    </div>
                    <hr />*@
                    <div style="border:1px solid">
                        <div id="map"></div>
                    </div>
                </div>
                <div class="col-md-4">
                    <center><h6>RELACIÓN DE PEDIDOS</h6></center>
                    <hr />
                    <div class="white-box">
                        <table id="tbl_pedidos" class="table table-bordered  " cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>N° Pedido</th>
                                    <th>Cliente</th>
                                    <th>Dirección</th>
                                    <th>Fecha Entrega</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in ListaRelacionPedidos">
                                    <td>{{$index + 1}}</td>
                                    <td>
                                        <a ng-click="MostarRutaEntrega($index,item); " style="cursor: pointer">{{item.Numero_Pedido}}</a>
                                    </td>
                                    <td>
                                        <a ng-click="MostarRutaEntrega($index,item);" style="cursor: pointer">{{item.apellidosNombre_Cliente}}</a>
                                    </td>
                                    <td>
                                        <a ng-click="MostarRutaEntrega($index,item);" style="cursor: pointer">{{item.direccion_Pedido_Cab}}</a>
                                    </td>
                                    <td>{{item.fechaEntrega_Pedido_Cab}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="text-center">
                            <ul class="pagination pagination-split m-t-30"></ul>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </section>


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" style="width:95%" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div  >
                        <button class="btn btn-sm btn-primary" ng-click="mostrarTodasRutas()" >Mostrar todas las rutas</button>
                    </div>
                </div>
                <div class="modal-body">    
                    <div class="row">
                        <div class="col-md-8 modal_body_map">
                            <div class="location-map" id="location-map">
                                <div style="width: 800px; height: 500px;" id="mapModal"></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-md-12  card" ng-repeat="ruta in ListaRutas.routes" ng-click="mostrarRutaElegida(ruta,$index)" style="cursor:pointer" ng-show="showOpciones">
                                <div class="container">
                                    <h4>
                                        <b>Ruta  {{$index + 1}}</b>
                                    </h4>
                                    <h5>
                                        <b> Distancia : </b>  {{ruta.legs[0].distance.text}}
                                    </h5>
                                    <p>{{ruta.summary}}</p>
                                    <div ng-if="($index + 1)==1" class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="background-color:#800080;width:100%">
                                        </div>
                                    </div>
                                    <div ng-if="($index + 1)==2" class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="background-color:#aaaaaa;width:100%">
                                        </div>
                                    </div>
                                    <div ng-if="($index + 1)==3" class="progress">
                                        <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="background-color:#74ccef;width:100%">
                                        </div>
                                    </div>
                                    <h5>
                                        <b> Tiempo : </b>  {{ruta.legs[0].duration_in_traffic.text}}
                                    </h5>
                                </div>
                            </div>
                            <div class="table table-responsive" >
                                <div id="guiaRuta" ng-show="!showOpciones" style="height: 500px;  overflow:auto;font-size: 12px;">

                                </div>
                            </div>
    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

